# インデックス方式

分割モードを選択した後、次に取り組むべきは、整理されたコンテンツに対するインデックス設定です。検索エンジンが効率的なインデックスアルゴリズムを用いて、ユーザーの質問に最も適したウェブページの内容を見つけ出すため、インデックスの設定は重要です。これは、LLMがナレッジベースの内容を検索する効率と、回答の精度に直接影響します。

提供されるインデックス方法は次の3つです：

* **高品質モード**
* **経済的モード**
* **Q＆Aモード（コミュニティ版のみサポート）**

## 高品質

高品質モードでは、埋め込みモデルを活用してテキストブロックを数値ベクトルへと変換し、大量のテキスト情報を効率的に圧縮・保存します。これにより、**ユーザーの質問とテキスト内容のマッチングをより正確に行うことが可能です**。

内容をベクトル化してデータベースに登録後、効率的な検索手法を用いて、質問とマッチするコンテンツを探し出す必要があります。高品質モードでは、ベクトル検索、全文検索、混合検索の3種類の検索オプションを提供します。各オプションの詳細は、検索設定のセクションでご確認ください。

高品質モードを選択した場合、後で経済的モードのインデックスモードへのダウングレードはできません。変更を希望する場合は、ナレッジベースを再構築し、インデックス設定を選び直すことをお勧めします。

<figure><img src="https://assets-docs.dify.ai/2024/12/51442c8fcd05479616a3dd8279a4853a.png" alt=""><figcaption><p>高品質モード</p></figcaption></figure>

## Q＆Aモードの有効化（オプション、コミュニティ版限定）

このモードを有効にすると、システムがアップロードされたテキストを分割し、各セグメントに基づいて自動的にQ＆Aペアを生成します。

一般的な「Q to P」（ユーザーの問題がテキストの一節と一致する）方式とは異なり、Q＆Aモードでは「Q to Q」（問題が問題と一致する）方式を採用しています。

これは、「よくある質問」の文書のテキストが通常、**完全な文法構造を持つ自然言語である**ため、Q＆Aモードは問題と答えの一致をより明確にし、同時に一部の高頻度で類似度の高い質問シナリオに対応できます。

> Q＆Aモードは、英語、日本語、中国語の3言語のみ対応しています。モードを有効にすると、LLMトークンの消費が増加し、経済的モードのインデックス方法は使用できません。

<figure><img src="https://assets-docs.dify.ai/2024/12/70960a237d4f5eaed2dbf46a2cca2bf7.png" alt=""><figcaption><p>Q＆Aモード</p></figcaption></figure>

ユーザーが質問すると、システムは最も類似した質問を見つけ、対応するセグメントを回答として返します。この方法はより精密で、ユーザーの質問に直接一致し、ユーザーが求める情報をより正確に探し出すのに役立ちます。

<figure><img src="https://assets-docs.dify.ai/2024/12/8745ccabff56290eae329a9d3592f745.png" alt=""><figcaption><p>「Q to P」と「Q to Q」の区別</p></figcaption></figure>

## 経済的モード

経済的モードモードでは、各ブロック内の10個のキーワードを用いた検索を行い、品質は低下しますが、コストはかかりません。検索されたブロックには、転置インデックス方式のみを提供し、最も関連性の高いブロックを選択します。詳細は別の記事でご確認ください。

経済的モードのインデックス方式を選択した後、期待した効果が得られない場合は、ナレッジベースの設定ページで高品質のインデックス方式にアップグレードすることが可能です。

<figure><img src="https://assets-docs.dify.ai/2024/12/3b86e6b484da39452c164cb6372a7242.png" alt=""><figcaption><p>経済的モード</p></figcaption></figure>

## もっと読む

インデックス方式を設定した後、適切な検索方法を選択するために、以下の文書を参照してください。選択されるインデックス方式は、LLMが取得できる背景情報を決定し、結果の精度と信頼性に影響します。

* [検索オプションの設定](./selecting-retrieval-settings.md)